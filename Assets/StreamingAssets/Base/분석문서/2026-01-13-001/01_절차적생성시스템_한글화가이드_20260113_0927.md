# Caves of Qud 절차적 생성 시스템 한글화 가이드

**작성일시:** 2026-01-13 09:27  
**문서 유형:** 종합 분석 가이드  
**작성자:** AI Assistant

---

## 개요

Caves of Qud는 다음과 같은 요소들을 **절차적으로 생성(Procedurally Generated)**합니다:
- **역사 (History)**: 술탄 계보, 역사적 사건, 파벌 관계
- **이름 (Names)**: 캐릭터명, 지역명, 아이템명
- **대화 (Conversations)**: 동적으로 생성되는 대화문
- **퀘스트 (Quests)**: 절차적 퀘스트 텍스트
- **책 내용 (Books)**: 도서관 책 내용

---

## 1. 역사 시스템 (HistorySpice.json)

### 파일 위치
`/StreamingAssets/Base/HistorySpice.json`

### 주요 구조

이 파일은 게임의 역사를 절차적으로 생성하는 **템플릿 데이터베이스**입니다.

#### 1.1 Elements (요소) 시스템

각 "element"는 특정 테마를 나타냅니다:

```json
{
  "glass": {
    "professions": ["glassblower", "window maker"],
    "materials": ["glass", "sand"],
    "adjectives": ["glazed", "stained", "clear", "prismatic"],
    "nouns": ["prism", "glass", "mirror"],
    "practices": ["staring into mirrors", "staining glass"],
    "murdermethods": ["by trapping <pronouns> in a prism"],
    "quality": ["transparent visage", "sandy hair", "mirrored eyes"]
  }
}
```

**번역 필요 항목:**
- ✅ `professions` - 직업명
- ✅ `materials` - 재료명
- ✅ `adjectives` - 형용사
- ✅ `nouns` / `nounsPlural` - 명사 (단수/복수)
- ✅ `practices` - 관습/행위
- ✅ `murdermethods` - 살인 방법 (서술)
- ✅ `quality` - 특성 설명
- ✅ `babeTrait` - 아기 특성
- ✅ `ravaging` - 약탈 행위
- ✅ `ruinReason` - 폐허가 된 이유
- ✅ `mythicalEvent` - 신화적 사건
- ✅ `weddingConditions` - 결혼 조건

#### 1.2 한글화 시 주요 문제점

**문제 1: 동적 변수 삽입**

원문:
```
"by trapping <spice.pronouns.object.!random> in a prism"
```

이 텍스트는 게임 실행 중 `<spice.pronouns.object.!random>`가 "him" 또는 "her"로 치환됩니다.

**한글 문제점:**
- 영어: "by trapping **him** in a prism" / "by trapping **her** in a prism"
- 한글: "**그를** 프리즘에 가둬서" / "**그녀를** 프리즘에 가둬서"
- 조사가 달라지지 않음 (를/을 구분 불필요)

하지만 다른 경우:
```
"<entity.name>이/가 <item>을/를 발견했다"
```
여기서 `이/가`, `을/를`은 앞 단어의 받침 유무에 따라 달라집니다.

**해결 방안:**

1. **조사 자동 처리 시스템 필요**
   - 게임 엔진이 한글 조사를 자동으로 처리하는지 확인 필요
   - 없다면 모든 경우의 수를 작성하거나, 조사를 생략한 자연스러운 문장 구조 사용

2. **조사 회피 전략**
   ```
   원문: "killed <entity.name>"
   직역: "<entity.name>을/를 죽였다"
   회피: "<entity.name> 살해" (명사형)
   회피: "<entity.name>의 죽음" (소유격)
   ```

**문제 2: 복수형 처리**

영어는 단수/복수가 명확히 구분되지만, 한글은 문맥에 따라 처리:

```json
"nouns": ["prism"],
"nounsPlural": ["prisms"]
```

한글 번역:
```json
"nouns": ["프리즘"],
"nounsPlural": ["프리즘들", "여러 프리즘", "프리즘 여러 개"]
```

**문제 3: 관사(a/an/the) 처리**

원문에서 `<item.article>`은 "a" 또는 "an"을 자동 선택하지만, 한글에는 관사가 없습니다.

```
원문: "found <item.article> <item.name>"
영어: "found a sword" / "found an apple"
한글: "검을 발견했다" / "사과를 발견했다"
```

**해결:** 관사 변수는 무시하고 번역

---

## 2. 이름 생성 시스템 (Naming.xml)

### 파일 위치
`/StreamingAssets/Base/Naming.xml`

### 주요 구조

이 파일은 캐릭터, 장소, 파벌 이름을 절차적으로 생성합니다.

```xml
<namestyle Name="Qudish" Format="TitleCase">
  <prefixes Amount="1">
    <prefix Name="fa" />
    <prefix Name="ka" />
    <prefix Name="mu" />
  </prefixes>
  <infixes Amount="0-2">
    <infix Name="ga" />
    <infix Name="ra" />
  </infixes>
  <postfixes Amount="1">
    <postfix Name="bas" />
    <postfix Name="mut" />
  </postfixes>
</namestyle>
```

**생성 예시:**
- `fa` + `ra` + `mut` = "Faramut"
- `mu` + `ga` + `bas` = "Mugabas"

### 한글화 접근법

**옵션 1: 음차 (추천)**

생성된 영어 이름을 한글로 음차:
- "Faramut" → "파라무트"
- "Mugabas" → "무가바스"

**장점:**
- 구현이 간단
- 원작의 이국적 느낌 유지
- 발음 가능한 이름

**옵션 2: 한글 음절 시스템 재구축**

한글 음절로 새로운 naming system 구축:
```xml
<namestyle Name="Korean" Format="TitleCase">
  <prefixes Amount="1">
    <prefix Name="강" />
    <prefix Name="김" />
    <prefix Name="이" />
  </prefixes>
  <infixes Amount="0-1">
    <infix Name="서" />
    <infix Name="민" />
  </infixes>
  <postfixes Amount="1">
    <postfix Name="준" />
    <postfix Name="우" />
  </postfixes>
</namestyle>
```

**단점:**
- 작업량이 매우 많음
- 원작과 다른 느낌
- 게임 세계관과 맞지 않을 수 있음

**권장 사항:** **옵션 1 (음차)** 사용

---

## 3. 대화 시스템 (Conversations.xml)

### 동적 대화 생성

일부 대화는 역사 데이터를 참조하여 동적으로 생성됩니다:

```xml
<text>Did you hear? <spice.gossip.leadIns.!random> <spice.gossip.twoFaction.!random></text>
```

**실행 시 생성 예시:**
```
"Did you hear? Rumor is that the Putus Templar stole a relic from the Mechanimists."
```

### 한글화 전략

**1단계: HistorySpice.json의 gossip 섹션 번역**

```json
"gossip": {
  "leadIns": [
    "Did you hear?",
    "Rumor is that"
  ],
  "twoFaction": [
    "*f1* stole @item.a@item.name from *f2*."
  ]
}
```

한글 번역:
```json
"gossip": {
  "leadIns": [
    "들었어?",
    "소문에 의하면"
  ],
  "twoFaction": [
    "*f1*이/가 *f2*에게서 @item.name을/를 훔쳤대."
  ]
}
```

**2단계: 조사 처리 문제 해결**

**방법 A: 조사 생략형 문장**
```
"*f1*이/가" → "*f1*, 그들은"
"@item.name을/를" → "@item.name, 그것을"
```

**방법 B: 모든 경우의 수 작성**
```json
"twoFaction_받침O": "*f1*이 *f2*에게서 @item.name을 훔쳤대.",
"twoFaction_받침X": "*f1*가 *f2*에게서 @item.name를 훔쳤대."
```

**방법 C: 엔진 수정 (최선이지만 어려움)**

게임 엔진에 한글 조사 자동 처리 기능 추가

---

## 4. 퀘스트 시스템 (Quests.xml)

### 동적 퀘스트 텍스트

일부 퀘스트는 역사 데이터를 참조:

```xml
<quest>
  <name>Find the <spice.adjectives.!random> <spice.nouns.!random></name>
  <description>Seek the legendary artifact in the <region.name>.</description>
</quest>
```

**생성 예시:**
```
Name: "Find the Radiant Prism"
Description: "Seek the legendary artifact in the Salt Dunes."
```

### 한글화 접근

```xml
<quest>
  <name><spice.adjectives.!random> <spice.nouns.!random> 찾기</name>
  <description><region.name>에서 전설적인 유물을 찾아라.</description>
</quest>
```

**생성 예시:**
```
Name: "빛나는 프리즘 찾기"
Description: "소금 사구에서 전설적인 유물을 찾아라."
```

---

## 5. 책 내용 시스템 (LibraryCorpus.json)

### 파일 위치
`/StreamingAssets/Base/LibraryCorpus.json` (2.4MB)

### 구조

이 파일은 게임 내 도서관 책 내용을 생성하는 거대한 텍스트 코퍼스입니다.

**내용:**
- 과학 논문 발췌
- 철학 텍스트
- 역사 기록
- 시

### 한글화 접근

**옵션 1: 전체 번역 (권장하지 않음)**
- 작업량: 약 2.4MB의 텍스트
- 시간: 수백 시간 소요 예상

**옵션 2: 주요 책만 번역**
- 퀘스트 관련 책
- 게임 세계관 핵심 책
- 나머지는 영어 유지

**옵션 3: 요약/발췌 번역**
- 각 책의 핵심 문장만 번역
- 나머지는 "고대 언어로 쓰여 있어 해독할 수 없다" 등으로 처리

**권장 사항:** **옵션 2 또는 3**

---

## 6. 용어 통일 전략

### 핵심 용어 정리

절차적 생성 시스템에서 자주 사용되는 용어:

| English | 한글 | 비고 |
|---------|------|------|
| Sultan | 술탄 | 역사 시스템 핵심 |
| Faction | 파벌 | |
| Relic | 유물 | |
| Artifact | 고대고철 | 기존 번역 참조 |
| Prism | 프리즘 | |
| Element | 원소 | |
| History | 역사 | |
| Chronicle | 연대기 | |
| Legendary | 전설적인 | |
| Mythical | 신화적인 | |
| Procedural | 절차적 | 기술 용어 |

---

## 7. 번역 우선순위

### 높은 우선순위 (필수)

1. **HistorySpice.json - commonPhrases 섹션**
   - 가장 자주 사용되는 문구
   - 약 200-300개 항목

2. **HistorySpice.json - elements 섹션**
   - 역사 생성의 핵심
   - 약 10개 element × 10-15개 속성

3. **Conversations.xml - 동적 대화 템플릿**
   - 플레이어가 직접 보는 텍스트

### 중간 우선순위

4. **Quests.xml - 동적 퀘스트**
   - 일부 퀘스트만 동적 생성

5. **HistorySpice.json - professions 섹션**
   - 직업 관련 텍스트

### 낮은 우선순위

6. **LibraryCorpus.json**
   - 선택적 콘텐츠
   - 주요 책만 번역

7. **Naming.xml**
   - 음차로 처리 가능

---

## 8. 기술적 고려사항

### 조사 처리 시스템

**현재 상황 파악 필요:**

1. 게임 엔진이 한글 조사를 지원하는가?
2. 변수 치환 시스템이 어떻게 작동하는가?
3. 커스텀 함수를 추가할 수 있는가?

**테스트 방법:**

간단한 대화문을 수정하여 테스트:

```xml
<text>당신은 <item.name>을/를 발견했습니다.</text>
```

게임 실행 후 확인:
- "당신은 검을 발견했습니다." (받침 O)
- "당신은 사과를 발견했습니다." (받침 X)

둘 다 올바르게 표시되면 → 엔진이 조사 처리 지원
하나라도 이상하면 → 수동 처리 필요

### 변수 치환 문법

**현재 사용되는 패턴:**

```
<spice.path.to.value.!random>  // 랜덤 선택
<entity.name>                   // 엔티티 이름
<entity.subjectPronoun>         // 주격 대명사
<entity.objectPronoun>          // 목적격 대명사
<entity.possessivePronoun>      // 소유격 대명사
@item.a@item.name               // 관사 + 아이템명
*f1*, *f2*                      // 파벌 변수
*var*                           // 일반 변수
```

**한글화 시 필요한 추가 변수:**

```
<entity.name.josa_i_ga>         // 이/가
<entity.name.josa_eul_reul>     // 을/를
<entity.name.josa_eun_neun>     // 은/는
<item.name.josa_i_ga>           // 이/가
<item.name.josa_eul_reul>       // 을/를
```

---

## 9. 실전 번역 예시

### 예시 1: 역사 이벤트

**원문 (HistorySpice.json):**
```json
"mythicalEvent": [
  "a *var* shattered in every home",
  "a famous <professions.!random> completed their work on a legendary *var*"
]
```

**한글 번역 (조사 처리 가능한 경우):**
```json
"mythicalEvent": [
  "모든 가정에서 *var*이/가 산산조각 났다",
  "유명한 <professions.!random>이/가 전설적인 *var*에 대한 작업을 완료했다"
]
```

**한글 번역 (조사 처리 불가능한 경우 - 회피 전략):**
```json
"mythicalEvent": [
  "모든 가정의 *var*, 산산조각",
  "유명한 <professions.!random>, 전설적인 *var* 완성"
]
```

### 예시 2: 살인 방법

**원문:**
```json
"murdermethods": [
  "by trapping <spice.pronouns.object.!random> in a prism",
  "with a dagger made of <materials.!random>"
]
```

**한글 번역:**
```json
"murdermethods": [
  "<spice.pronouns.object.!random>을/를 프리즘에 가둬서",
  "<materials.!random>로 만든 단검으로"
]
```

**조사 회피 버전:**
```json
"murdermethods": [
  "프리즘 감금",
  "<materials.!random> 단검 사용"
]
```

### 예시 3: 대화 생성

**원문 (Conversations.xml + HistorySpice.json):**
```xml
<text><spice.gossip.leadIns.!random> <spice.gossip.twoFaction.!random></text>
```

```json
"gossip": {
  "leadIns": ["Did you hear?"],
  "twoFaction": ["*f1* stole @item.a@item.name from *f2*."]
}
```

**생성 결과:**
```
"Did you hear? The Putus Templar stole a relic from the Mechanimists."
```

**한글 번역:**
```json
"gossip": {
  "leadIns": ["들었어?"],
  "twoFaction": ["*f1*이/가 *f2*에게서 @item.name을/를 훔쳤대."]
}
```

**생성 결과 (이상적):**
```
"들었어? 푸투스 템플러가 메카니카 신자에게서 유물을 훔쳤대."
```

---

## 10. 작업 로드맵

### Phase 1: 조사 (1-2일)

- [ ] 게임 엔진의 한글 조사 처리 기능 확인
- [ ] 변수 치환 시스템 테스트
- [ ] 기존 번역 파일에서 동적 텍스트 사용 사례 찾기

### Phase 2: 핵심 용어 번역 (3-5일)

- [ ] HistorySpice.json - commonPhrases 섹션 번역
- [ ] HistorySpice.json - elements 섹션 번역
- [ ] 용어집 업데이트

### Phase 3: 대화 시스템 (5-7일)

- [ ] HistorySpice.json - gossip 섹션 번역
- [ ] Conversations.xml에서 동적 대화 템플릿 찾기
- [ ] 번역 및 테스트

### Phase 4: 퀘스트 시스템 (3-5일)

- [ ] Quests.xml에서 동적 퀘스트 찾기
- [ ] 번역 및 테스트

### Phase 5: 책 시스템 (선택적, 10-20일)

- [ ] 주요 책 목록 작성
- [ ] 우선순위 책 번역
- [ ] 나머지 책 처리 방침 결정

### Phase 6: 테스트 및 수정 (5-10일)

- [ ] 게임 내 테스트
- [ ] 어색한 표현 수정
- [ ] 조사 오류 수정

---

## 11. 권장 도구

### 번역 작업

1. **JSON 편집기**
   - Visual Studio Code + JSON 확장
   - 문법 검사 및 자동 완성

2. **용어 관리**
   - 기존 glossary 파일 활용
   - 새로운 용어는 즉시 추가

3. **테스트**
   - 게임 실행 후 직접 확인
   - 스크린샷으로 기록

### 조사 처리 (엔진 지원 없는 경우)

1. **Python 스크립트**
   ```python
   def add_josa(word, josa_type):
       # 받침 확인
       last_char = word[-1]
       has_jongseong = (ord(last_char) - 0xAC00) % 28 > 0
       
       if josa_type == "i_ga":
           return word + ("이" if has_jongseong else "가")
       elif josa_type == "eul_reul":
           return word + ("을" if has_jongseong else "를")
       # ...
   ```

2. **번역 후처리**
   - 번역 완료 후 스크립트로 조사 자동 추가
   - 변수 위치에 마커 삽입

---

## 12. 주의사항

### 하지 말아야 할 것

❌ **변수 문법 수정**
```json
// 잘못된 예
"<spice.adjectives.!random>" → "<spice.형용사.!랜덤>"
```

❌ **변수 삭제**
```json
// 잘못된 예
"killed <entity.name>" → "죽였다"  // entity.name 삭제됨
```

❌ **JSON 구조 변경**
```json
// 잘못된 예
"adjectives": ["red", "blue"] → "형용사": {"빨간": "red", "파란": "blue"}
```

### 해야 할 것

✅ **변수 유지**
```json
"killed <entity.name>" → "<entity.name>을/를 죽였다"
```

✅ **문맥에 맞는 번역**
```json
"glass" → "유리" (재료), "잔" (용기), "거울" (문맥에 따라)
```

✅ **일관성 유지**
```json
"prism" → 항상 "프리즘" (다른 번역 사용 금지)
```

---

## 13. 결론

### 핵심 요약

1. **절차적 생성 시스템 파일:**
   - `HistorySpice.json` - 역사/이벤트 생성
   - `Naming.xml` - 이름 생성
   - `LibraryCorpus.json` - 책 내용
   - `Conversations.xml` - 동적 대화
   - `Quests.xml` - 동적 퀘스트

2. **가장 큰 도전 과제:**
   - 한글 조사 처리 (이/가, 을/를, 은/는)
   - 복수형 처리
   - 관사 처리

3. **권장 접근법:**
   - 조사 처리 시스템 확인 (최우선)
   - 핵심 용어부터 번역 (HistorySpice.json)
   - 이름은 음차 처리
   - 책은 선택적 번역

4. **예상 작업 시간:**
   - 최소 (핵심만): 20-30일
   - 전체 (책 포함): 50-70일

### 다음 단계

1. 게임 엔진의 한글 조사 처리 기능 테스트
2. 결과에 따라 번역 전략 확정
3. HistorySpice.json의 commonPhrases 섹션부터 시작
4. 번역하면서 용어집 지속 업데이트

---

## 부록: 빠른 참조

### 주요 파일 경로

```
/StreamingAssets/Base/
├── HistorySpice.json       (183 KB) - 역사 생성 템플릿
├── Naming.xml              (169 KB) - 이름 생성 규칙
├── LibraryCorpus.json      (2.4 MB) - 책 내용 코퍼스
├── Conversations.xml       (647 KB) - 대화 (일부 동적)
├── Quests.xml              (27 KB)  - 퀘스트 (일부 동적)
└── Corpus/                          - 추가 텍스트 코퍼스
    ├── Machinery-of-the-Universe-excerpt.txt
    ├── Meteorology-Weather-Explained-excerpt.txt
    └── Thought-Forms-excerpt.txt
```

### 변수 문법 치트시트

| 문법 | 설명 | 예시 |
|------|------|------|
| `<path.!random>` | 랜덤 선택 | `<spice.colors.!random>` |
| `<entity.name>` | 엔티티 이름 | "Resheph" |
| `<entity.subjectPronoun>` | 주격 대명사 | "he", "she" |
| `<entity.objectPronoun>` | 목적격 대명사 | "him", "her" |
| `<entity.possessivePronoun>` | 소유격 대명사 | "his", "her" |
| `@item.a@item.name` | 관사 + 이름 | "a sword" |
| `*var*` | 일반 변수 | 문맥에 따라 치환 |
| `*f1*`, `*f2*` | 파벌 변수 | "Putus Templar" |
| `<^.property>` | 상대 경로 | 현재 element 내 참조 |

### 조사 처리 예시

| 단어 | 이/가 | 을/를 | 은/는 |
|------|-------|-------|-------|
| 검 (받침 O) | 검**이** | 검**을** | 검**은** |
| 사과 (받침 X) | 사과**가** | 사과**를** | 사과**는** |
| 프리즘 (받침 O) | 프리즘**이** | 프리즘**을** | 프리즘**은** |
| 유물 (받침 O) | 유물**이** | 유물**을** | 유물**은** |

---

**문서 끝**

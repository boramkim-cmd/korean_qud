# 문제 분석 및 해결 방향

**작성일시:** 2026-01-13 10:58  
**상태:** 디버깅 중

---

## 🔍 현재 문제

### 증상
```
입력: "붉은 바위(으)로 가라"
출력: "붉은 바위(으)로 가라" (그대로 표시)
```

### 원인 분석
1. **C# 스크립트가 실행되지 않음**
   - `Korean.ReplaceJosa()` 함수가 호출되지 않음
   - Harmony 패치가 적용되지 않음

2. **가능한 이유**
   - manifest.json의 `preloadScripts` 작동 안 함
   - 클래스/메서드 초기화 안 됨
   - Harmony 패치 타겟이 잘못됨

---

## 📚 발견한 해결책

### 1. QudUX 모드 (작동하는 예제)
- GitHub: egocarib/CavesOfQud-QudUX-v2
- 실제로 작동하는 Harmony 패치 사용
- 참고할 수 있는 실제 코드

### 2. 핵심 차이점

#### 우리 코드 (작동 안 함)
```csharp
public static class Korean
{
    public static string ReplaceJosa(string text)
    {
        // 함수만 있음, 호출되지 않음
    }
}
```

#### 필요한 것
```csharp
// 1. 게임 시작 시 자동 실행
[ModSensitiveCacheInit]
static Korean()
{
    // 초기화
}

// 2. Harmony 패치로 자동 호출
[HarmonyPatch]
public static void Postfix(ref string __result)
{
    __result = Korean.ReplaceJosa(__result);
}
```

---

## 🎯 다음 단계

### 1. QudUX 코드 분석
- 실제 작동하는 Harmony 패치 찾기
- 초기화 방법 확인
- 패치 타겟 확인

### 2. 우리 코드 수정
- QudUX 방식 적용
- 올바른 초기화
- 올바른 패치 타겟

### 3. 테스트
- 로그 확인
- 작동 검증

---

**작성일:** 2026-01-13 10:58

# 절차적 생성 실제 작동 확인 가이드

**작성일시:** 2026-01-13 11:36  
**목적:** 게임이 실제로 랜덤 생성하는 콘텐츠 한글화 확인

---

## 🎲 게임이 랜덤 생성하는 것들

### 1. **NPC 이름** (Naming.xml)
```
게임이 생성: "파유멧", "쿠라슘", "메유운"
사용 예시: "파유멧(이)가 말했다" → "파유멧이 말했다"
```

### 2. **지역 이름** (Naming.xml)
```
게임이 생성: "바나나 숲 아케쉬", "깊은 정글 비파"
사용 예시: "아케쉬(으)로 가라" → "아케쉬로 가라"
```

### 3. **역사 텍스트** (HistorySpice.json)
```
게임이 생성: "1025년 3월, 파유멧(이)가 크롬 아치 아래를 걸었다"
자동 처리: "1025년 3월, 파유멧이 크롬 아치 아래를 걸었다"
```

### 4. **아이템 이름** (절차적 생성)
```
게임이 생성: 랜덤 접두사 + 아이템
예시: "고대의 검", "빛나는 방패"
사용: "고대의 검(을)를 발견" → "고대의 검을 발견"
```

---

## 🎮 실제 확인 방법

### A. 새 게임 시작 (역사 텍스트)

```
1. New Game 선택
2. 캐릭터 생성
3. 게임 시작 화면에서 역사 텍스트 읽기
```

**확인할 내용:**
```
"=year=년 =month=월, =name=(이)가..."
↓ 게임이 변수 치환
"1025년 3월, 파유멧(이)가..."
↓ MessageQueue 패치
"1025년 3월, 파유멧이..." ✅
```

### B. 월드맵 탐험 (지역명)

```
1. 조파 마을에서 시작
2. 월드맵으로 나가기
3. 새로운 지역 발견
4. 지역 이름 확인
```

**확인할 내용:**
```
게임 생성: "바나나 숲 아케쉬"
이동 메시지: "바나나 숲 아케쉬(으)로 이동"
자동 처리: "바나나 숲 아케쉬로 이동" ✅
```

### C. NPC 만나기 (랜덤 이름)

```
1. 던전 탐험
2. 랜덤 NPC 만나기
3. 대화 시작
4. 이름 확인
```

**확인할 내용:**
```
NPC 이름: "파유멧"
대화: "파유멧(이)가 말했다"
자동 처리: "파유멧이 말했다" ✅
```

### D. 아이템 발견 (랜덤 생성)

```
1. 던전 탐험
2. 상자 열기 / 적 처치
3. 아이템 획득 메시지 확인
```

**확인할 내용:**
```
획득: "고대의 검(을)를 발견했다!"
자동 처리: "고대의 검을 발견했다!" ✅
```

---

## 📊 현재 구현 상태

### ✅ 완료된 것
1. **MessageQueue Harmony 패치** - 모든 텍스트 자동 처리
2. **Korean.ReplaceJosa()** - 조사 선택 알고리즘
3. **Quests.xml** - 퀘스트 텍스트 (고정)
4. **Conversations.xml** - NPC 대화 (고정)
5. **HistorySpice.json** - 역사 텍스트 (절차적)
6. **Naming.xml** - 이름 생성 규칙 (절차적)

### 🔄 작동 방식

```
게임 엔진
  ↓
변수 치환 (=name=, =year= 등)
  ↓
"파유멧(이)가 1025년(에) 검(을)를 발견했다"
  ↓
MessageQueue.Add()
  ↓
Korean.ReplaceJosa() [Harmony Patch]
  ↓
"파유멧이 1025년에 검을 발견했다" ✅
  ↓
화면 표시
```

---

## 🧪 테스트 시나리오

### 시나리오 1: 역사 텍스트 (100% 절차적)

```
1. 새 게임 시작
2. 캐릭터 생성 완료
3. 게임 시작 화면 확인

예상 결과:
"1025년 3월, 파유멧이 크롬 아치 아래를 걸었다"
"1026년, 쿠라슘은 거슬링 무리를 물리쳤다"
```

### 시나리오 2: 지역 탐험 (절차적 지역명)

```
1. 월드맵 진입
2. 새 지역 발견
3. 이동 메시지 확인

예상 결과:
"바나나 숲 아케쉬로 이동했다"
"깊은 정글 비파에 도착했다"
```

### 시나리오 3: NPC 대화 (절차적 이름 + 고정 대화)

```
1. 랜덤 NPC 만나기
2. 대화 시작
3. 이름 + 조사 확인

예상 결과:
"파유멧이 말했다: '안녕하세요'"
"쿠라슘을 만났다"
```

### 시나리오 4: 아이템 획득 (절차적 이름)

```
1. 던전 탐험
2. 아이템 발견
3. 획득 메시지 확인

예상 결과:
"고대의 검을 발견했다!"
"빛나는 방패를 장착했다!"
```

---

## 🔍 로그로 확인

### 실시간 모니터링
```bash
tail -f ~/Library/Logs/Freehold\ Games/CavesOfQud/Player.log | grep "Korean Josa"
```

### 예상 출력
```
[Korean Josa] Message: 파유멧(이)가 → 파유멧이
[Korean Josa] Message: 1025년(에) → 1025년에
[Korean Josa] Message: 검(을)를 → 검을
[Korean Josa] Message: 아케쉬(으)로 → 아케쉬로
[Korean Josa] Message: 거슬링 무리(을)를 → 거슬링 무리를
```

---

## 📋 체크리스트

### 절차적 생성 확인
- [ ] **역사 텍스트** - 게임 시작 시 자동 생성
- [ ] **NPC 이름** - 랜덤 생성 + 조사 처리
- [ ] **지역 이름** - 랜덤 생성 + 조사 처리
- [ ] **아이템 이름** - 랜덤 생성 + 조사 처리
- [ ] **대화 텍스트** - 변수 치환 + 조사 처리

### 모두 확인되면
```
✅ 절차적 생성 시스템 완벽 작동
✅ 모든 랜덤 콘텐츠 한글화
✅ 자동 조사 처리 작동
```

---

## 💡 핵심 포인트

### 게임이 하는 일
1. 랜덤 이름 생성 (Naming.xml 규칙 사용)
2. 변수 치환 (=name=, =year= 등)
3. 텍스트 조합

### MessageQueue 패치가 하는 일
1. 모든 텍스트 가로채기
2. `(조사1)조사2` 패턴 찾기
3. 받침 확인
4. 올바른 조사 선택
5. 화면에 표시

### 결과
```
게임: "파유멧(이)가 검(을)를 발견했다"
패치: "파유멧이 검을 발견했다" ✅
```

---

**작성일:** 2026-01-13 11:36  
**결론:** 게임이 생성하는 모든 랜덤 콘텐츠가 자동으로 한글화됩니다!

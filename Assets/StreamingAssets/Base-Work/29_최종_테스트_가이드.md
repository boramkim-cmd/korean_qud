# JosaHandler v12 최종 테스트 가이드

**버전:** JosaHandler.cs v12 - ConversationUI 패치 포함  
**적용 완료:** 2026-01-13 13:30

---

## ✅ 설치 확인 완료

**파일 위치:**
```
~/Library/Application Support/com.FreeholdGames.CavesOfQud/Mods/
└── KoreanLocalization/
    └── Scripts/
        └── JosaHandler.cs (5707 bytes, v12)
```

**확인된 내용:**
- ✅ ConversationUI 패치 포함
- ✅ MessageQueue 패치 포함
- ✅ Harmony 문법 정확

---

## 🎮 게임 테스트 (필수!)

### 1단계: 게임 완전 재시작

```
1. Caves of Qud 완전 종료 (Cmd+Q)
2. 게임 재실행
3. Main Menu → Mods
4. Korean Localization 비활성화 (체크 해제)
5. 다시 활성화 (체크)
6. Apply → 게임 재시작
```

**중요:** 모드를 비활성화 → 재활성화해야 새 버전 로드됨!

---

### 2단계: 로그 확인 (터미널)

```bash
tail -f ~/Library/Application\ Support/com.FreeholdGames.CavesOfQud/Player.log | grep Korean
```

**예상 출력:**
```
[Korean Josa] v12 - ConversationUI Patch Added!
[Korean Josa] MessageQueue Patch Active
[Korean Josa] ConversationUI Patch Active
```

**만약 메시지가 없으면:**
- 모드가 로드되지 않음
- 게임 재시작 필요

---

### 3단계: 대화 테스트

**테스트 시나리오:**
```
1. New Game → Arconaut → Joppa 시작
2. Elder Irudad 찾기 (북쪽 건물)
3. 대화 시작 (Space 키)
```

**확인 사항:**

#### ✅ 성공 (v12 작동)
```
화면 표시:
"조파로 온 것을 환영하네"
"우리의 신선한 물을 마셔도 좋고"
"쿠션에 앉게나"
```

#### ❌ 실패 (v12 미작동)
```
화면 표시:
"조파(으)로 온 것(을)를 환영하네"
"우리의 신선한 물(을)를 마셔도 좋고"
"쿠션(에) 앉게나"
```

---

## 📊 예상 결과

### Case 1: 완벽 작동 ✅

**로그:**
```
[Korean Josa] v12 - ConversationUI Patch Added!
[Korean Josa] MessageQueue Patch Active
[Korean Josa] ConversationUI Patch Active
```

**대화:**
```
Elder Irudad: "조파로 온 것을 환영하네"
선택지: "이곳이 조파인가요?"
```

**의미:** 모든 시스템 정상 작동!

---

### Case 2: 로그만 작동 ⚠️

**로그:**
```
[Korean Josa] v12 - ConversationUI Patch Added!
```

**대화:**
```
Elder Irudad: "조파(으)로 온 것(을)를 환영하네"
```

**의미:** 
- 모드는 로드됨
- ConversationUI 패치가 실행 안 됨
- 메서드 이름이 틀렸거나 게임 버전 불일치

---

### Case 3: 전혀 작동 안 함 ❌

**로그:** (메시지 없음)

**대화:** 영어로 표시

**의미:**
- 모드가 로드되지 않음
- manifest.json 문제
- 모드 활성화 안 됨

---

## 🔧 문제 해결

### 문제 1: 로그 메시지 없음

**해결:**
```bash
# 1. 모드 폴더 확인
ls -la ~/Library/Application\ Support/com.FreeholdGames.CavesOfQud/Mods/KoreanLocalization/

# 2. 모드 재설치
cp -r "/Users/ben/Desktop/무제 폴더/StreamingAssets/Base-Work/Mod/KoreanLocalization" \
   ~/Library/Application\ Support/com.FreeholdGames.CavesOfQud/Mods/

# 3. 게임 재시작
```

---

### 문제 2: 조사 마커 그대로 표시

**원인:** ConversationUI 패치 미작동

**가능한 해결책:**
1. 게임 버전 확인 (최신 버전?)
2. DLL 재분석 (메서드 이름 변경 가능성)
3. 대안: Conversations.xml에서 조사 마커 제거

---

## 📝 테스트 결과 보고

### 보고 양식

```markdown
## 테스트 결과

### 로그 메시지
- [ ] v12 메시지 확인
- [ ] ConversationUI Patch Active 확인

### 대화 테스트
- [ ] 조사 자동 처리 작동
- [ ] "조파로" (O) vs "조파(으)로" (X)

### 문제
- 

### 스크린샷
- 
```

---

## 🎯 다음 단계

### 성공 시
1. HistorySpice.json 번역 시작
2. 추가 NPC 대화 번역
3. Random Village 테스트

### 실패 시
1. 로그 파일 공유
2. 게임 버전 확인
3. 대안 방법 논의 (조사 마커 제거)

---

**준비 완료!** 
게임을 재시작하고 Elder Irudad와 대화해서 조사 처리를 확인해주세요!

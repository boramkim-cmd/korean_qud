# 절차적 생성 테스트 방법

**작성일시:** 2026-01-13 11:31  
**목적:** 절차적 생성 아이템, 대사, 지역명 테스트 가이드

---

## 🎲 1. 절차적 생성 아이템 테스트

### 게임 내 확인 방법

#### A. Wish 명령어 사용 (개발자 모드)
```
1. 게임 시작
2. 아무 키나 눌러 콘솔 열기
3. "wish" 입력
4. 아이템 이름 검색
```

#### B. 자연스러운 발견
```
1. 던전 탐험 (Golgotha, Red Rock 등)
2. 상인에게서 구매 (조파의 탐)
3. 적 처치 후 루팅
```

### 조사 처리 확인
```
아이템 획득 메시지:
"고대의 검(을)를 발견했다!" → "고대의 검을 발견했다!"

아이템 장착 메시지:
"빛나는 방패(을)를 장착했다!" → "빛나는 방패를 장착했다!"
```

### 로그 확인
```bash
tail -f ~/Library/Logs/Freehold\ Games/CavesOfQud/Player.log | grep "Korean Josa"
```

**예상 출력:**
```
[Korean Josa] Message: 고대의 검(을)를 → 고대의 검을
[Korean Josa] Message: 빛나는 방패(이)가 → 빛나는 방패가
```

---

## 💬 2. 절차적 생성 대사 테스트

### HistorySpice.json 대사

#### 게임 내 확인
```
1. 새 게임 시작
2. 캐릭터 생성 완료
3. 게임 시작 시 역사 텍스트 확인
```

**예시:**
```
원본: "=year=년 =month=월, =name=(이)가 크롬 아치 아래를 걸었다"
변수 치환: "1025년 3월, 파유멧(이)가 크롬 아치 아래를 걸었다"
조사 처리: "1025년 3월, 파유멧이 크롬 아치 아래를 걸었다" ✅
```

#### 테스트 파일 위치
```
Mod/KoreanLocalization/HistorySpice.json
```

### Conversations.xml 대사

#### 게임 내 확인
```
1. 조파 마을에서 시작
2. NPC와 대화:
   - 장로 이루다드
   - 메멧
   - 워든 이라메
```

**예시:**
```
"조파(으)로 온 것(을)를 환영하네"
↓
"조파로 온 것을 환영하네" ✅
```

---

## 🗺️ 3. 절차적 생성 지역명 테스트

### Naming.xml 지역명

#### 게임 내 확인 방법

**A. 월드맵 탐험**
```
1. 게임 시작
2. 조파 마을 밖으로 나가기
3. 월드맵에서 새로운 지역 발견
4. 지역 이름 확인
```

**B. 빠른 여행 메뉴**
```
1. Tab 키 (빠른 여행)
2. 발견한 지역 목록 확인
3. 지역명에 조사 태그 확인
```

### 예상 지역명
```
생성: "바나나 숲 아케쉬"
사용: "바나나 숲 아케쉬(으)로 이동" → "바나나 숲 아케쉬로 이동"

생성: "깊은 정글 비파"
사용: "깊은 정글 비파(에)서 발견" → "깊은 정글 비파에서 발견"
```

### 테스트 파일
```
Mod/KoreanLocalization/Naming.xml
```

---

## 🧪 4. 종합 테스트 시나리오

### 시나리오 1: 조파 마을 시작

```
1. 새 게임 → 조파 마을 시작
2. 장로 이루다드와 대화
   확인: "조파(으)로 온 것(을)를 환영하네" → "조파로 온 것을 환영하네"

3. 메멧에게 퀘스트 받기
   확인: "붉은 바위(으)로 가줄 수 있나?" → "붉은 바위로 가줄 수 있나?"

4. 붉은 바위로 이동
   확인: 지역명 "붉은 바위(으)로 이동" → "붉은 바위로 이동"

5. 거슬링 시체 획득
   확인: "거슬링 시체(을)를 획득했다" → "거슬링 시체를 획득했다"

6. 장로에게 복귀
   확인: "시체(을)를 가지고 왔습니다" → "시체를 가지고 왔습니다"
```

### 시나리오 2: 아이템 수집

```
1. 던전 탐험 (Golgotha 추천)
2. 절차적 생성 아이템 발견
3. 아이템 획득 메시지 확인
4. 인벤토리에서 아이템 이름 확인
5. 아이템 사용/장착 메시지 확인
```

### 시나리오 3: 역사 텍스트

```
1. 새 캐릭터 생성
2. 게임 시작 시 역사 텍스트 읽기
3. 변수 + 조사 조합 확인
4. 로그 파일 확인
```

---

## 📊 5. 체크리스트

### 필수 테스트
- [ ] 조파 NPC 대화 (이루다드, 메멧, 이라메)
- [ ] 퀘스트 텍스트 (워터바인 퀘스트)
- [ ] 지역명 (붉은 바위, 바나나 숲 등)
- [ ] 아이템 획득 메시지
- [ ] 역사 텍스트 (게임 시작 시)

### 조사 조합 테스트
- [ ] `(이)가` - 주격
- [ ] `(을)를` - 목적격
- [ ] `(은)는` - 보조사
- [ ] `(으)로` - 방향
- [ ] `(에)서` - 장소
- [ ] `(에)게` - 여격

### 로그 확인
- [ ] MessageQueue 패치 작동 확인
- [ ] Korean.ReplaceJosa() 호출 확인
- [ ] 조사 변환 로그 확인

---

## 🔍 6. 디버깅

### 조사가 처리되지 않는 경우

**증상:** `"단어(이)가"` 그대로 표시

**확인 사항:**
```bash
# 1. 모드 로드 확인
ls ~/Library/Application\ Support/com.FreeholdGames.CavesOfQud/Mods/KoreanLocalization/

# 2. 로그 확인
tail -100 ~/Library/Logs/Freehold\ Games/CavesOfQud/Player.log | grep "Korean"

# 3. JosaHandler.cs 컴파일 확인
grep "Korean Josa" ~/Library/Logs/Freehold\ Games/CavesOfQud/Player.log
```

**예상 로그:**
```
========================================
[Korean Josa] v8 - MessageQueue Patch
[Korean Josa] Based on official wiki example
========================================
[Korean Josa] Test: 검이, 사과를, 서울로
[Korean Josa] ✅ Tests PASSED!
========================================
```

### 일부만 처리되는 경우

**원인:** MessageQueue를 거치지 않는 텍스트
**해결:** 해당 텍스트의 렌더링 경로 확인 필요

---

## 🎮 7. 빠른 테스트 명령어

### 개발자 콘솔
```
1. 게임 실행
2. ` (백틱) 키로 콘솔 열기
3. 명령어 입력:

# 아이템 생성
wish:고대의 검

# 지역 이동
wish:teleport 붉은 바위

# 퀘스트 완료
wish:completequest What's Eating the Watervine?
```

---

**작성일:** 2026-01-13 11:31  
**다음 단계:** 게임 실행 후 위 시나리오대로 테스트

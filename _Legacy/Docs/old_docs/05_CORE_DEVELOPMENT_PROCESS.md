# κ°λ° ν”„λ΅μ„Έμ¤ λ° μ•μ „ κ°€μ΄λ“

## π›΅οΈ μ¤λ¥ λ°©μ§€ ν”„λ΅μ„Έμ¤

ν¨μΉ μ‹κ·Έλ‹μ² λ―Έμ¤λ§¤μΉλ΅ μΈν• λ΅λ“ μ‹¤ν¨λ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄ λ‹¤μ ν”„λ΅μ„Έμ¤λ¥Ό μ—„κ²©ν μ¤€μν•©λ‹λ‹¤.

### 1λ‹¨κ³„: λ©”μ„λ“ ν™•μΈ (Source Inspection)
μƒλ΅μ΄ ν¨μΉλ¥Ό μ‘μ„±ν•κΈ° μ „, λ°λ“μ‹ κ²μ„ μ†μ¤ μ½”λ“μ—μ„ λ©”μ„λ“μ **μ •ν™•ν• μ‹κ·Έλ‹μ²**λ¥Ό ν™•μΈν•©λ‹λ‹¤.
```bash
# λ©”μ„λ“ μ΄λ¦„κ³Ό νλΌλ―Έν„° ν™•μΈ
grep "void MethodName(" Assets/core_source/Path/To/Class.cs
```

### 2λ‹¨κ³„: ν¨μΉ μ‘μ„± (Implementation)
ν™•μΈλ μ‹κ·Έλ‹μ²λ¥Ό `HarmonyPatch` μ–΄νΈλ¦¬λ·°νΈμ— λ…μ‹ν•©λ‹λ‹¤.
```csharp
[HarmonyPatch("MethodName", new System.Type[] { typeof(Arg1Type), typeof(Arg2Type) })]
```

### 3λ‹¨κ³„: μλ™ κ²€μ¦ (Validation)
λ³€κ²½ μ‚¬ν•­μ„ μ €μ¥ν• ν›„, λ°°ν¬ μ „μ— λ°λ“μ‹ `validate-mod.sh`λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
```bash
./validate-mod.sh
```
μ΄ μ¤ν¬λ¦½νΈλ” λ‹¤μμ„ μλ™μΌλ΅ ν™•μΈν•©λ‹λ‹¤:
- β… ν΄λμ¤ νμΌ μ΅΄μ¬ μ—¬λ¶€ λ° λ„¤μ„μ¤νμ΄μ¤ μΌμΉ
- β… λ©”μ„λ“ μ΄λ¦„ μ΅΄μ¬ μ—¬λ¶€
- β… **νλΌλ―Έν„° κ°μ λ° μ‹κ·Έλ‹μ² μΌμΉ μ—¬λ¶€** (μƒλ΅ μ¶”κ°€λ κΈ°λ¥)
- β… μ¤‘κ΄„νΈ λ° μ„Έλ―Έμ½λ΅  λ“± κΈ°λ³Έ λ¬Έλ²•

### 4λ‹¨κ³„: ν†µν•© λ°°ν¬ (Unified Deployment)
κ°λ³„ μ¤ν¬λ¦½νΈ μ‹¤ν–‰ λ€μ‹ , κ²€μ¦μ΄ ν¬ν•¨λ ν†µν•© λ°°ν¬ μ¤ν¬λ¦½νΈλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
```bash
./sync-and-deploy.sh "μ»¤λ°‹ λ©”μ‹μ§€"
```
*μ£Όμ: κ²€μ¦ λ‹¨κ³„μ—μ„ μ—λ¬(`β—`)κ°€ λ°μƒν•λ©΄ λ°°ν¬μ™€ Git ν‘Έμ‹κ°€ μλ™μΌλ΅ μ°¨λ‹¨λ©λ‹λ‹¤.*

---

## π“ μ½”λ”© κ·μΉ™

### 1. λ„¤μ„μ¤νμ΄μ¤
- λ¨λ“  ν¨μΉ νμΌμ€ `QudKRTranslation.Patches` λ„¤μ„μ¤νμ΄μ¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
- λ¨λ“  λ°μ΄ν„° νμΌμ€ `QudKRTranslation.Data` λ„¤μ„μ¤νμ΄μ¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

### 2. Scope κ΄€λ¦¬
- μ „μ—­ ν¨μΉ(`ScreenBuffer`, `UITextSkin`)λ” λ°λ“μ‹ `ScopeManager.GetCurrentScope()`λ¥Ό ν™•μΈν•μ—¬ ν™μ„±ν™”λ κ²½μ°μ—λ§ μ‘λ™ν•΄μ•Ό ν•©λ‹λ‹¤.
- κ° ν™”λ©΄ ν¨μΉ(`Show_Prefix`)μ—μ„ ν•΄λ‹Ή ν™”λ©΄μ— λ§λ” λ°μ΄ν„°λ¥Ό `PushScope` ν•κ³ , `Postfix`μ—μ„ `PopScope` ν•©λ‹λ‹¤.

### 3. λ¦¬ν”λ ‰μ… μμ 
- κ°€λ¥ν•λ©΄ `typeof(ClassName)`μ„ μ‚¬μ©ν•μ—¬ μ•μ •μ„±μ„ ν™•λ³΄ν•©λ‹λ‹¤.
- ν΄λμ¤λ…μ΄ λ²„μ „λ³„λ΅ λ‹¤λ¥Έ κ²½μ°μ—λ§ `AccessTools.TypeByName()`μ„ μ‚¬μ©ν•λ” `TargetMethod()` λ°©μ‹μ„ μ‚¬μ©ν•©λ‹λ‹¤.

## β›“οΈ ν•µμ‹¬ κ°λ° μ›μΉ™ (Core Principles)

λ¨λ“  κ°λ° λ° λ²μ—­ ν¨μΉ μ‘μ—… μ‹ λ‹¤μ μ›μΉ™μ„ μ¤€μν•΄μ•Ό ν•©λ‹λ‹¤.

1.  **μ‹¤μ  μ½”λ“ κΈ°λ° μ‘μ—… (Code-First Verification)**
    - **μ¶”μΈ΅ κΈμ§€**: λ©”μ„λ“ μ‹κ·Έλ‹μ²λ‚ λ΅μ§μ„ μ¶”μΈ΅ν•μ—¬ μ½”λ”©ν•μ§€ λ§μ‹­μ‹μ¤.
    - **ν™•μΈ ν•„μ**: λ°λ“μ‹ `Assets/core_source` λ‚΄μ μ‹¤μ  κ²μ„ μ†μ¤ μ½”λ“λ¥Ό μ—΄μ–΄μ„ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.
    - **κ·Όκ±° μ μ‹**: μ‘μ—… μ μ• μ‹ νΉμ • νμΌμ νΉμ • λΌμΈμ„ κ·Όκ±°λ΅ μ μ‹ν•μ‹­μ‹μ¤.

2.  **λ…μ‹μ  μ½”λ“ μ‘μ„± (Explicit Coding)**
    - **λ¨νΈν•¨ μ κ±°**: Harmony ν¨μΉ μ‘μ„± μ‹ `target method`λ¥Ό λ¬Έμμ—΄ λ€μ‹  `nameof()`λ¥Ό μ‚¬μ©ν•κ³ , νλΌλ―Έν„° νƒ€μ…μ„ `new Type[] { ... }`λ΅ λ…μ‹ν•μ‹­μ‹μ¤.
    - **μλ™ μ¶”λ΅  μ§€μ–‘**: λ°νƒ€μ„ μ¶”λ΅ μ— μμ΅΄ν•κΈ°λ³΄λ‹¤ μ‚¬λμ΄ μ½μ—μ„ λ•λ„ μ •ν™•ν• λ€μƒμ„ μ• μ μκ² μ‘μ„±ν•©λ‹λ‹¤.

3.  **λ¨λ“ν™” λ° μ•μ „μ„± (Safety & Modularity)**
    - μ›λ³Έ κ²μ„ λ΅μ§μ„ ν•΄μΉμ§€ μ•λ„λ΅ λ°©μ–΄μ μΌλ΅ μ½”λ”©ν•λ©°, κΈ°λ¥λ³„λ΅ λ…λ¦½μ μΈ λ¨λ“λ΅ κ°λ°ν•©λ‹λ‹¤.

## π¨ λ¬Έμ  λ°μƒ μ‹ λ€μ‘

### "Undefined target method" μ—λ¬ λ°μƒ μ‹
1. `validate-mod.sh`μ μ¶λ ¥μ„ ν™•μΈν•μ—¬ μ‹κ·Έλ‹μ² λ¶μΌμΉ μ§€μ μ„ μ°Ύμµλ‹λ‹¤.
2. μ—λ¬κ°€ λ°μƒν• ν΄λμ¤μ μ†μ¤λ¥Ό μ—΄μ–΄ μ¤λ²„λ΅λ”©λ λ©”μ„λ“κ°€ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤.
3. `03_CORE_API_REFERENCE.md`μ— μ •μλ μ‹κ·Έλ‹μ²μ™€ λ€μ΅°ν•©λ‹λ‹¤.

### "Type or namespace name could not be found" μ—λ¬ λ°μƒ μ‹
1. `04_CORE_NAMESPACE_GUIDE.md`λ¥Ό μ°Έμ΅°ν•μ—¬ μ¬λ°”λ¥Έ `using` λ¬Έμ΄ ν¬ν•¨λμ—λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
2. μ: `ScreenBuffer`λ” `ConsoleLib.Console` λ„¤μ„μ¤νμ΄μ¤μ— μ„μΉν•©λ‹λ‹¤.

---

## π›΅οΈ μ¤‘λ³µ κµ¬ν„ λ°©μ§€ λ° κ΄€λ¦¬ μ²΄κ³„

ν”„λ΅μ νΈμ κ·λ¨κ°€ μ»¤μ§μ— λ”°λΌ λΉ„μ·ν• κΈ°λ¥μ„ μ¤‘λ³µμΌλ΅ λ§λ“¤μ§€ μ•λ„λ΅ λ‹¤μ ν”„λ΅μ„Έμ¤λ¥Ό λ°λ“μ‹ μ¤€μν•©λ‹λ‹¤.

### 1. κ°λ° μ „: μΈλ±μ¤ κ²€μƒ‰ (Search Before Code)
μƒλ΅μ΄ μ ν‹Έλ¦¬ν‹°λ‚ ν¨μΉλ¥Ό λ§λ“¤κΈ° μ „, `Docs/01_CORE_PROJECT_INDEX.md`μ—μ„ ν‚¤μ›λ“λ¥Ό κ²€μƒ‰ν•μ‹­μ‹μ¤.
- μ: "Translate", "Format", "UI" λ“±
- μ΄λ―Έ μ΅΄μ¬ν•λ” λ©”μ„λ“κ°€ μλ‹¤λ©΄ ν•΄λ‹Ή λ©”μ„λ“λ¥Ό ν™•μ¥ν•κ±°λ‚ μ¬μ‚¬μ©ν•©λ‹λ‹¤.

### 2. κ°λ° μ¤‘: ν‘μ¤€ ν—¤λ” κΈ°μ  (Standard Headers)
λ¨λ“  C# νμΌ μµμƒλ‹¨μ— λ‹¤μ ν•μ‹μ„ ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤. `project_tool.py`κ°€ μ΄λ¥Ό μ½μ–΄ μΈλ±μ¤λ¥Ό μ£ΌκΈ°μ μΌλ΅ κ°±μ‹ ν•©λ‹λ‹¤.
```csharp
/*
 * νμΌλ…: [νμΌλ…].cs
 * λ¶„λ¥: [λ¶„λ¥λ… (μ: Core, UI Patch)]
 * μ—­ν• : [μ΄ νμΌμ΄ ν•λ” κµ¬μ²΄μ μΈ μΌ]
 */
```

### 3. κ°λ° ν›„: ν†µν•© κ²€μ¦ (Validation)
`python3 tools/project_tool.py`λ¥Ό μ‹¤ν–‰ν•μ—¬ λ‹¤μ μ‚¬ν•­μ„ ν™•μΈν•©λ‹λ‹¤.
- **μ¤‘λ³µ ν•¨μ**: μ΄λ¦„μ΄ κ°™μ€ ν•¨μκ°€ μ—¬λ¬ νμΌμ— κ±Έμ³ μλ”μ§€ ν™•μΈ (μ¤λ²„λ΅λ”©μ€ ν—μ©λλ‚, λ‹¤λ¥Έ ν΄λμ¤μ— κ°™μ€ μ—­ν• μ ν•¨μκ°€ ννΈν™”λ κ²½μ° ν†µν•© λ€μƒ)
- **ν—¤λ” λ„λ½**: μƒλ΅ λ§λ“  νμΌμ΄ κ΄€λ¦¬ μ²΄κ³„μ— ν¬ν•¨λμ—λ”μ§€ ν™•μΈν•μ—¬ μΈλ±μ¤μ μ •ν•©μ„±μ„ μ μ§€ν•©λ‹λ‹¤.

### 4. μ—­ν•  λ¶„λ‹΄ μ›μΉ™
- **Core**: λ°μ΄ν„° λ΅λ“ λ° μµν•λ‹¨ μ—”μ§„ (LocalizationManager, TranslationEngine)
- **Utils**: κ³µν†µ λ³€ν™ λ΅μ§ (TranslationUtils, JosaHandler)
- **Patches**: μ‹¤μ  κ²μ„ λ©”μ„λ“ μ—°κ²° (UI, World Patches)
- **Data**: μ •μ  λ°μ΄ν„° μ •μ (OptionsData)
